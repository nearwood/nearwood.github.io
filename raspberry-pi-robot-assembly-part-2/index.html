<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>Raspberry Pi Robot – Assembly Part 2 | Nick</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Raspberry Pi Robot – Assembly Part 2" />
<meta property="og:description" content="This was the hardest part. If you wire the wrong things together you can brick your Pi. I took some time to decide on which pins to use, and after assembly and testing everything worked. I&#39;ll explain which pins I picked, but note that this information will not work with other hardware configurations.[I originally had a Model B Pi, but due to needing the second hardware PWM (which is hidden on the B), switched to the B&#43;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nearwood.dev/raspberry-pi-robot-assembly-part-2/" />
<meta property="article:published_time" content="2016-03-08T01:47:20+00:00" />
<meta property="article:modified_time" content="2019-12-10T10:57:45-06:00" />

		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Raspberry Pi Robot – Assembly Part 2"/>
<meta name="twitter:description" content="This was the hardest part. If you wire the wrong things together you can brick your Pi. I took some time to decide on which pins to use, and after assembly and testing everything worked. I&#39;ll explain which pins I picked, but note that this information will not work with other hardware configurations.[I originally had a Model B Pi, but due to needing the second hardware PWM (which is hidden on the B), switched to the B&#43;."/>

	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/themes/dark-green.css">
	<link rel="icon" href="/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="/icons/32.png" sizes="32x32" type="image/png">
		
</head>
<body>
	<header class="header">
	<a class="logo" href="/">Nick</a>
	
<nav class="main-nav" role="navigation">
	<button id="toggle" class="main-nav__btn" aria-label="Menu toggle" aria-expanded="false" tabindex="0">
		<div class="main-nav__btn-box" tabindex="-1">
			<svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18">
				<path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/>
				<path class="icon-menu__x" d="M11.55 9L18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55 0 9 6.45 15.45 0 18 2.55 11.55 9z"/>
			</svg>
		</div>
	</button>
	<ul id="menu" class="main-nav__list">
		<li class="main-nav__item"><a class="main-nav__link" href="/pages/about/">About</a></li>
		<li class="main-nav__item"><a class="main-nav__link" href="/pages/contact/">Contact</a></li>
	</ul>
</nav>
</header>

	<div class="primary">
	
	<main class="main">
		<div class="single block">
			<article class="post">
	<div class="post__meta meta mb">
<time class="post__meta-published meta-published" datetime="2016-03-08T01:47:20">March 08, 2016</time>
<time class="post__meta-lastmod meta-lastmod" datetime="2019-12-10T10:57:45">Updated: December 10, 2019</time>
<span class="post__meta-categories meta-categories">
	<span class="meta-categories__list">Categories: <a class="meta-categories__link" href="/categories/programming" rel="category">Programming</a>, <a class="meta-categories__link" href="/categories/raspberry-pi" rel="category">Raspberry Pi</a>, <a class="meta-categories__link" href="/categories/technology" rel="category">Technology</a></span>
</span>
	</div>

				<h1 class="post__title">Raspberry Pi Robot – Assembly Part 2</h1>
				<div class="post__content"><p>This was the hardest part. If you wire the wrong things together you can brick your Pi. I took some time to decide on which pins to use, and after assembly and testing everything worked. I'll explain which pins I picked, but note that this information will not work with other hardware configurations.[<img class="lostImage" src="" alt="Image no longer available :("/></p>
<p>I originally had a Model B Pi, but due to needing the second hardware PWM (which is hidden on the B), switched to the B+. The B+ is largely the same, save for the 40 pin expansion headers instead of 26. On one of these pins, #35, the second PWM channel is connected. I got a complete kit for $60 or so, that came with a case, wireless USB, power supply, USB cable, heat sinks, etc.</p>
<p>There's a slight problem though. I have a parallel cable for a Model B, which is 26 pins. It didn't fit on the 40 pin B+ so I had to gently modify the 26 pin parallel cable with a grinder:</p>
<p><img class="lostImage" src="" alt="Image no longer available :("/>Technically I've probably comprimised the integrity of the plug's locking mechanism but if it doesn't work there are other options. You could use jumper wires, as you only really need 15 or so of them. The lonely blue jumper wire there is the sole reason I got the B+.</p>
<p>Anyway, now that the Pi is sorted, the real assembly comes in wiring up the prototype board.</p>
<p><img class="lostImage" src="" alt="Image no longer available :("/>That there is the version I have working as of this posting date. I moved the motor B's PWM input from pin 17 to a separate header, as I will get to next.</p>
<p>So here's the goal. We have a motor controller board that controls two motors, and two encoders. We need to connect up everything from the Pi to these two. That involves power:</p>
<ul>
<li>12v for the motors</li>
<li>5v for the controller</li>
<li>3.3v for the encoders</li>
</ul>
<p>The rest of the pins go to digital inputs on either the Pi or the controller. Now, I tried to be clever and hooked it up in a way I thought was logical, but besides the PWM connections, you can swap most everything else around.</p>
<img class="lostImage" src="" alt="Image no longer available :("/>
<table>
<thead>
<tr>
<th>Physical Pin</th>
<th>BCM Pin</th>
<th>Purpose</th>
<th>Wire</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>2</td>
<td>ENC1</td>
<td>A Encoder White</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>ENC2</td>
<td>B Encoder White</td>
</tr>
<tr>
<td>12</td>
<td>18</td>
<td>PWM</td>
<td>A PWM</td>
</tr>
<tr>
<td>35</td>
<td>19</td>
<td>PWM</td>
<td>B PWM</td>
</tr>
</tbody>
</table>
<p>GPIO 2 (SDA) = Encoder 1 (to encoder's white wire)</p>
<p>GPIO 3 (SCL) = Encoder 2 (to encoder's white wire)</p>
<p>GPIO 4 = STBY (Yellow wire)</p>
<p>GPIO 18 (PWM) = PWMA (blue wire)</p>
<p>GPIO 19 (PWM) = PWMB (blue wire) <strong>(New connection, modification not pictured!)</strong></p>
<p>GPIO 21/27 = BIN1</p>
<p>GPIO 22 = BIN2</p>
<p>GPIO 23 = AIN1</p>
<p>GPIO 24 = AIN2</p>
<p>A few notes:</p>
<ul>
<li>The encoders need a pullup to work. GPIO 2 and GPIO 3 have a 1.3kOhm pull up to 3.3v enabled by default. We just need to connect the red power wire for the encoders up to 3.3v as well. If you use another pin, you'll need to enable the pull-up in software.</li>
<li>GPIO 18 and GPIO 35 (B+ only) have hardware PWM capabilities as an &ldquo;alt function&rdquo;, specifically &ldquo;ALT_FUNC_5&rdquo; for each of them.</li>
</ul>
<p>Here's the bototm of the board. You can see the routing of the 5v and GND lines clearly.</p>
<img class="lostImage" src="" alt="Image no longer available :("/>
<p>The following is a photo of the voltage regulator that I have a 12v battery pack attached to. And here is the VM (motor voltage) wire hooked up straight to the batter source (so, +12v). This is a soldered jumper wire, so do not, under any circumstance, connect this to your Pi or motor controller except for the VM pin. It will destroy anything else.</p>
<img class="lostImage" src="" alt="Image no longer available :("/>
<img class="lostImage" src="" alt="Image no longer available :("/>
<p> </p>
<p>And in Part 3, I will go over the finished construction.</p>
</div>
				
				<footer class="post__footer">
					


<div class="post__tags">
	<a class="post__tag btn" href="/tags/drd">drd</a><a class="post__tag btn" href="/tags/raspberry-pi">raspberry pi</a>
</div>


					
<div class="post__share share">
	<a class="share__link btn" title="Share on Twitter" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fnearwood.dev%2fraspberry-pi-robot-assembly-part-2%2f&amp;text=Raspberry%20Pi%20Robot%20%e2%80%93%20Assembly%20Part%202" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Share on Twitter', 'width=800,height=450,resizable=yes,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
	</a>
	<a class="share__link btn" title="Share on Reddit" href="https://www.reddit.com/submit?url=https%3a%2f%2fnearwood.dev%2fraspberry-pi-robot-assembly-part-2%2f&amp;title=Raspberry%20Pi%20Robot%20%e2%80%93%20Assembly%20Part%202" target="_blank" rel="noopener noreferrer" onclick="window.open(this.href, 'Share on Reddit', 'width=832,height=624,toolbar=0,status=0'); return false">
		<svg class="share__icon" aria-label="Reddit" role="img" width="32" height="32" viewBox="0 0 512 512"><path fill-rule="evenodd" d="M375 146a32 32 0 1 0-29-46l-65-13c-5-1-9 2-10 6l-22 97c-45 1-85 15-113 36a42 42 0 1 0-45 69l-1 12c0 65 74 117 166 117s166-52 166-117l-1-11a42 42 0 1 0-44-69c-28-21-67-35-111-37l19-86 58 13a32 32 0 0 0 32 29zM190 353c2-1 4 0 5 1 15 11 38 18 61 18s46-6 61-18a7 7 0 0 1 8 10c-18 14-44 21-69 21-25-1-51-7-69-21a6 6 0 0 1 3-11zm23-44a31 31 0 1 1-44-44 31 31 0 0 1 44 44zm130 0a31 31 0 1 0-44-44 31 31 0 0 0 44 44z"/></svg>
	</a>
</div>
				</footer>
				
			</article>
		</div>
	</main>
	
	



<div class="related block">
	<h3 class="related__title">Related</h3>
	<ul class="related__list">
		
		<li class="related__item"><a class="related__link" href="/raspberry-pi-robot-assembly-part-1/">Raspberry Pi Robot – Assembly Part 1</a></li>
		
		<li class="related__item"><a class="related__link" href="/raspberry-pi-robot-cross-compiling/">Raspberry Pi – Cross-compiling</a></li>
		
		<li class="related__item"><a class="related__link" href="/raspberry-pi-robot/">Raspberry Pi Robot</a></li>
		
	</ul>
</div>

	

	</div>
	<footer class="footer">
<div class="footer__social social">
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/nearwood">
			<svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
		</a>
		<a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/nearwood">
			<svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
		</a>
</div>
	<div class="footer__copyright">© 2019 Nick Earwood. <span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span></div>
</footer>
<script src="/js/menu.js"></script>
</body>
</html>